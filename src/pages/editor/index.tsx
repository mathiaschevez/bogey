import Head from 'next/head'
import React, { useState } from 'react'
// Import the Slate editor factory.
import { createEditor } from 'slate'

// Import the Slate components and React plugin.
import { Slate, Editable, withReact } from 'slate-react'
import { api } from '~/utils/api'

const initialValue = [
  {
    type: 'paragraph',
    children: [{ text: 'Write a paragraph' }],
  },
]

const Editor = () => {
  const [editor] = useState(() => withReact(createEditor()))
  console.log(editor)
  const articleCreation = api.article.createArticle.useMutation()


  return (
    <>
      <Head>
        <title>Bogey Blaine</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="flex min-h-screen flex-col gap-12 p-6">
        <div className='border-2 border-black rounded p-3 h-[600px] bg-white'>
          <Slate editor={editor} value={initialValue}>
            <Editable
              className='h-full'
              onKeyDown={event => {
                console.log(event.key)
                console.log(editor.children)
              }}
            />
          </Slate>
        </div>
      </main>
    </>
  )
}

export default Editor
